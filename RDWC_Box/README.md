# ๐ฑ RDWC Box

<div align="center">

![RDWC Box Logo](screenshots/logo.png)

**ะกะธััะตะผะฐ ะผะพะฝะธัะพัะธะฝะณะฐ ะธ ัะฟัะฐะฒะปะตะฝะธั ะณะธะดัะพะฟะพะฝะธะบะพะน**

[![ESP32](https://img.shields.io/badge/ESP32-Supported-green?style=for-the-badge&logo=espressif)](https://www.espressif.com/)
[![PHP](https://img.shields.io/badge/PHP-8.0+-blue?style=for-the-badge&logo=php)](https://php.net/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-orange?style=for-the-badge&logo=mysql)](https://mysql.com/)
[![Telegram](https://img.shields.io/badge/Telegram-Bot-blue?style=for-the-badge&logo=telegram)](https://telegram.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)](LICENSE)

[ะะตะผะพ](#-ัะบัะธะฝัะพัั) โข [ะฃััะฐะฝะพะฒะบะฐ](#-ัััะฐะฝะพะฒะบะฐ) โข [ะะพะบัะผะตะฝัะฐัะธั](#-ะดะพะบัะผะตะฝัะฐัะธั) โข [ะะพะดะดะตัะถะบะฐ](#-ะฟะพะดะดะตัะถะบะฐ)

</div>

---

## ๐ ะ ะฟัะพะตะบัะต

**RDWC Box** โ ััะพ ะบะพะผะฟะปะตะบัะฝะฐั ัะธััะตะผะฐ ะผะพะฝะธัะพัะธะฝะณะฐ ะธ ัะฟัะฐะฒะปะตะฝะธั ะณะธะดัะพะฟะพะฝะฝะพะน ัััะฐะฝะพะฒะบะพะน ัะธะฟะฐ RDWC (Recirculating Deep Water Culture). ะัะพะตะบั ะฒะบะปััะฐะตั ะฟัะพัะธะฒะบั ะดะปั ESP32, ะฒะตะฑ-ะธะฝัะตััะตะนั ะธ Telegram ะฑะพัะฐ ะดะปั ัะดะฐะปัะฝะฝะพะณะพ ะบะพะฝััะพะปั.

### โจ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

| ะคัะฝะบัะธั | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| ๐ **ะะพะฝะธัะพัะธะฝะณ** | pH, EC, ัะตะผะฟะตัะฐัััะฐ ะบะพัะฝะตะน/ะฒะพะทะดััะฐ, ะฒะปะฐะถะฝะพััั, ััะพะฒะตะฝั ัะฐััะฒะพัะฐ |
| ๐ **ะัะฐัะธะบะธ** | ะะฝัะตัะฐะบัะธะฒะฝัะต ะณัะฐัะธะบะธ ั ัะธะปัััะฐัะธะตะน (ัะฐั/ะดะตะฝั/ะฝะตะดะตะปั/ะผะตััั) |
| ๐ง **ะะฐัะพัั** | ะฃะฟัะฐะฒะปะตะฝะธะต 4 ะดะพะทะธััััะธะผะธ ะฝะฐัะพัะฐะผะธ |
| ๐ **ะะฒัะพัะธะทะฐัะธั** | ะกะธััะตะผะฐ ัะพะปะตะน (ะฐะดะผะธะฝะธัััะฐัะพั/ะฟัะพัะผะพัั) |
| ๐ค **Telegram** | ะะพั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ ะธ ัะฟัะฐะฒะปะตะฝะธั |
| ๐ **ะะพะณะธัะพะฒะฐะฝะธะต** | ะะฑะปะฐัะฝัะต ะปะพะณะธ ั ESP32 ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ |
| ๐ฑ **ะะดะฐะฟัะธะฒะฝะพััั** | ะะฐะฑะพัะฐะตั ะฝะฐ ะะ, ะฟะปะฐะฝัะตัะฐั ะธ ัะผะฐัััะพะฝะฐั |

---

## ๐ธ ะกะบัะธะฝัะพัั

<div align="center">

### ๐ ะกััะฐะฝะธัะฐ ะฒัะพะดะฐ
![Login](screenshots/login.png)

### ๐ ะะปะฐะฒะฝะฐั ะฟะฐะฝะตะปั
![Dashboard](screenshots/dashboard.png)

### ๐ ะัะฐัะธะบะธ
![Charts](screenshots/charts.png)

### โ๏ธ ะะฐะปะธะฑัะพะฒะบะฐ
![Calibration](screenshots/calibration.png)

### ๐ง ะฃะฟัะฐะฒะปะตะฝะธะต ะฝะฐัะพัะฐะผะธ
![Pumps](screenshots/pumps.png)

### ๐ ะะพะณะธ ESP32
![Logs](screenshots/logs.png)

### ๐ค Telegram ะฑะพั
![Telegram](screenshots/telegram.png)

### ๐ฑ ะะพะฑะธะปัะฝะฐั ะฒะตััะธั
![Mobile](screenshots/mobile.png)

</div>

---

## ๐ง ะะฑะพััะดะพะฒะฐะฝะธะต

### ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั

| ะะพะผะฟะพะฝะตะฝั | ะะฐะทะฝะฐัะตะฝะธะต | ะะพะดะบะปััะตะฝะธะต |
|-----------|------------|-------------|
| **ESP32** | ะะปะฐะฒะฝัะน ะบะพะฝััะพะปะปะตั | - |
| **DS18B20** | ะขะตะผะฟะตัะฐัััะฐ ะบะพัะฝะตะน | GPIO 4 (OneWire) |
| **AHT10/AHT20** | ะขะตะผะฟะตัะฐัััะฐ + ะฒะปะฐะถะฝะพััั ะฒะพะทะดััะฐ | I2C (0x38) |
| **MCP3421** | ะะฆะ ะดะปั pH ะดะฐััะธะบะฐ (18-bit) | I2C (0x68) |
| **MCP23017** | GPIO ัะฐััะธัะธัะตะปั ะดะปั ะฝะฐัะพัะพะฒ | I2C (0x20) |
| **EC ัะปะตะบััะพะดั** | ะญะปะตะบััะพะฟัะพะฒะพะดะฝะพััั ัะฐััะฒะพัะฐ | ADC |
| **HC-SR04** | ะฃัะพะฒะตะฝั ัะฐััะฒะพัะฐ (ะพะฟัะธะพะฝะฐะปัะฝะพ) | GPIO |

### ะกัะตะผะฐ ะฟะพะดะบะปััะตะฝะธั

```
ESP32 GPIO Layout:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  3V3  โ GND โ GPIO21 (SDA) โ GPIO22 (SCL)
โ       โ     โ      โ       โ      โ
โ       โ     โ   โโโโโโโโโโโโดโโโโโโโโโโโ
โ       โ     โ   โ       I2C Bus       โ
โ       โ     โ   โโโโโโโโโโโโฌโโโโโโโโโโโค
โ       โ     โ   โ MCP3421  โ AHT10    โ
โ       โ     โ   โ (pH ADC) โ (Temp/Hum)โ
โ       โ     โ   โโโโโโโโโโโโผโโโโโโโโโโโค
โ       โ     โ   โ MCP23017 โ          โ
โ       โ     โ   โ (Pumps)  โ          โ
โ       โ     โ   โโโโโโโโโโโโดโโโโโโโโโโโ
โ GPIO4 โโโโโโโโโโ DS18B20 (OneWire)
โ GPIO34โโโโโโโโโโ EC Electrode (Ap)
โ GPIO35โโโโโโโโโโ EC Electrode (An)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะฃััะฐะฝะพะฒะบะฐ

### ะขัะตะฑะพะฒะฐะฝะธั

- **ะกะตัะฒะตั:** VPS ั Ubuntu 20.04+, nginx, PHP 8.0+, MySQL 8.0+
- **ESP32:** PlatformIO ะธะปะธ Arduino IDE
- **Telegram:** Bot Token ะพั @BotFather

### 1๏ธโฃ ะะฐัััะพะนะบะฐ ัะตัะฒะตัะฐ

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะฟะฐะบะตัะพะฒ
apt update && apt install -y nginx php-fpm php-mysql mysql-server

# ะกะพะทะดะฐะฝะธะต ะฑะฐะทั ะดะฐะฝะฝัั
mysql -u root -p
```

```sql
CREATE DATABASE wegabox;
CREATE USER 'wegabox'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON wegabox.* TO 'wegabox'@'localhost';
FLUSH PRIVILEGES;
USE wegabox;
SOURCE /var/www/wegabox/database.sql;
```

### 2๏ธโฃ ะะฐะณััะทะบะฐ ัะฐะนะปะพะฒ

```bash
# ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน
git clone https://github.com/myseringan/Esp_Projects.git
cd Esp_Projects/RDWC_Box

# ะกะบะพะฟะธััะนัะต ัะตัะฒะตัะฝัะต ัะฐะนะปั
cp -r server/* /var/www/wegabox/

# ะะฐัััะพะนัะต ะฟัะฐะฒะฐ
chown -R www-data:www-data /var/www/wegabox
```

### 3๏ธโฃ ะะฐัััะพะนะบะฐ nginx

```nginx
server {
    listen 80;
    server_name your_domain.com;
    root /var/www/wegabox;
    index index.php;
    
    location / {
        try_files $uri $uri/ =404;
    }
    
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php-fpm.sock;
    }
}
```

### 4๏ธโฃ ะัะพัะธะฒะบะฐ ESP32

1. ะัะบัะพะนัะต ะฟะฐะฟะบั `firmware/` ะฒ PlatformIO
2. ะััะตะดะฐะบัะธััะนัะต `src/pre.h`:

```cpp
// WiFi
#define WIFI_SSID     "Your_WiFi"
#define WIFI_PASSWORD "Your_Password"

// ะกะตัะฒะตั
#define SERVER_URL    "http://your_domain.com/api.php"
#define API_KEY       "your_api_key"

// ะะฐััะธะบะธ (1 = ะฒะบะปััะตะฝ, 0 = ะฒัะบะปััะตะฝ)
#define c_DS18B20     1
#define c_AHT10       1
#define c_MCP3421     1
#define c_MCP23017    1
```

3. ะะฐะณััะทะธัะต ะฟัะพัะธะฒะบั: `pio run --target upload`

### 5๏ธโฃ ะะฐัััะพะนะบะฐ Telegram ะฑะพัะฐ

1. ะกะพะทะดะฐะนัะต ะฑะพัะฐ ัะตัะตะท @BotFather
2. ะััะตะดะฐะบัะธััะนัะต `bot.php`:

```php
$BOT_TOKEN = "your_bot_token";
$ADMINS = ["your_chat_id"];
```

3. ะะฐัััะพะนัะต webhook:

```bash
curl "https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://your_domain.com/bot.php"
```

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### ๐ ะะฒัะพัะธะทะฐัะธั

| ะะพะปั | ะะพะณะธะฝ | ะะฐัะพะปั | ะัะฐะฒะฐ |
|------|-------|--------|-------|
| ะะดะผะธะฝะธัััะฐัะพั | `admin` | `admin123` | ะะพะปะฝัะน ะดะพัััะฟ |
| ะะพะปัะทะพะฒะฐัะตะปั | `user` | `user123` | ะขะพะปัะบะพ ะฟัะพัะผะพัั |

> โ๏ธ **ะะฐะถะฝะพ:** ะะทะผะตะฝะธัะต ะฟะฐัะพะปะธ ะฟะพ ัะผะพะปัะฐะฝะธั ะฒ ัะฐะนะปะต `index.php`

### ๐ก API Endpoints

| ะะตัะพะด | URL | ะะฟะธัะฐะฝะธะต |
|-------|-----|----------|
| GET | `/api.php?action=data` | ะัะฟัะฐะฒะบะฐ ะดะฐะฝะฝัั ั ESP32 |
| GET | `/api.php?action=log` | ะัะฟัะฐะฒะบะฐ ะปะพะณะฐ |
| GET | `/api.php?action=logs` | ะะพะปััะตะฝะธะต ะปะพะณะพะฒ |
| GET | `/api.php?action=last` | ะะพัะปะตะดะฝะธะต ะฟะพะบะฐะทะฐะฝะธั |
| GET | `/api.php?action=pumps` | ะกะพััะพัะฝะธะต ะฝะฐัะพัะพะฒ |

### โ๏ธ ะะฐะปะธะฑัะพะฒะบะฐ pH

ะัะฟะพะปัะทัะนัะต ะฑััะตัะฝัะต ัะฐััะฒะพัั pH 4.01, 6.86, 9.18:

1. ะะพะณััะทะธัะต ะดะฐััะธะบ ะฒ ัะฐััะฒะพั pH 4.01
2. ะะพะถะดะธัะตัั ััะฐะฑะธะปะธะทะฐัะธะธ (2-3 ะผะธะฝ)
3. ะะฐะฟะธัะธัะต ะทะฝะฐัะตะฝะธะต RAW (ะผะ)
4. ะะพะฒัะพัะธัะต ะดะปั pH 6.86 ะธ 9.18
5. ะะฝะตัะธัะต ะทะฝะฐัะตะฝะธั ะฒ ัะฐะทะดะตะป "ะะฐะปะธะฑัะพะฒะบะฐ"

### โก ะะฐะปะธะฑัะพะฒะบะฐ EC

ะัะฟะพะปัะทัะนัะต ะบะฐะปะธะฑัะพะฒะพัะฝัะต ัะฐััะฒะพัั 1.413 ะผะก/ัะผ ะธ 2.76 ะผะก/ัะผ:

1. ะะทะผะตัััะต ัะพะฟัะพัะธะฒะปะตะฝะธะต R2 ะดะปั ะบะฐะถะดะพะณะพ ัะฐััะฒะพัะฐ
2. ะะฝะตัะธัะต ะทะฝะฐัะตะฝะธั ะฒ ะบะฐะปะธะฑัะพะฒะบั

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
RDWC_Box/
โโโ ๐ firmware/                 # ะัะพัะธะฒะบะฐ ESP32
โ   โโโ ๐ src/
โ   โ   โโโ ๐ dev/             # ะะพะดัะปะธ ะดะฐััะธะบะพะฒ
โ   โ   โ   โโโ aht10/
โ   โ   โ   โโโ ds18b20/
โ   โ   โ   โโโ mcp3421/
โ   โ   โ   โโโ mcp23017/
โ   โ   โโโ main.cpp
โ   โ   โโโ pre.h               # ะะฐัััะพะนะบะธ
โ   โ   โโโ cloudapi.h          # API ะบะปะธะตะฝั
โ   โโโ platformio.ini
โ
โโโ ๐ server/                   # ะกะตัะฒะตัะฝะฐั ัะฐััั
โ   โโโ index.php               # ะะตะฑ-ะธะฝัะตััะตะนั
โ   โโโ api.php                 # REST API
โ   โโโ bot.php                 # Telegram ะฑะพั
โ   โโโ database.sql            # ะกัััะบัััะฐ ะะ
โ
โโโ ๐ screenshots/              # ะกะบัะธะฝัะพัั
โ   โโโ login.png
โ   โโโ dashboard.png
โ   โโโ charts.png
โ   โโโ ...
โ
โโโ ๐ README.md
```

---

## ๐๏ธ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

<details>
<summary><b>ESP32 ะฝะต ะฟะพะดะบะปััะฐะตััั ะบ WiFi</b></summary>

- ะัะพะฒะตัััะต SSID ะธ ะฟะฐัะพะปั ะฒ `pre.h`
- ะฃะฑะตะดะธัะตัั ััะพ ัะพััะตั ัะฐะฑะพัะฐะตั ะฝะฐ 2.4 GHz
- ะัะพะฒะตัััะต Serial Monitor (115200 baud)
</details>

<details>
<summary><b>pH ะฟะพะบะฐะทัะฒะฐะตั ะฝะตะฟัะฐะฒะธะปัะฝัะต ะทะฝะฐัะตะฝะธั</b></summary>

- ะัะฟะพะปะฝะธัะต ะบะฐะปะธะฑัะพะฒะบั ะฟะพ 3 ัะพัะบะฐะผ
- ะัะพะฒะตัััะต ะฟะพะดะบะปััะตะฝะธะต MCP3421
- ะฃะฑะตะดะธัะตัั ััะพ ะดะฐััะธะบ ะฟะพะณััะถัะฝ ะฒ ัะฐััะฒะพั
</details>

<details>
<summary><b>Telegram ะฑะพั ะฝะต ะพัะฒะตัะฐะตั</b></summary>

- ะัะพะฒะตัััะต ัะพะบะตะฝ ะฑะพัะฐ
- ะฃะฑะตะดะธัะตัั ััะพ webhook ะฝะฐัััะพะตะฝ (HTTPS ะพะฑัะทะฐัะตะปะตะฝ)
- ะัะพะฒะตัััะต chat_id ะฒ ัะฟะธัะบะต ัะฐะทัะตััะฝะฝัั
</details>

<details>
<summary><b>ะะตะฑ-ะธะฝัะตััะตะนั ะฝะต ะพัะบััะฒะฐะตััั</b></summary>

- ะัะพะฒะตัััะต nginx: `nginx -t && systemctl restart nginx`
- ะัะพะฒะตัััะต ะฟัะฐะฒะฐ: `chown -R www-data:www-data /var/www/wegabox`
- ะกะผะพััะธัะต ะปะพะณะธ: `tail -f /var/log/nginx/error.log`
</details>

---

## ๐ค ะะพะดะดะตัะถะบะฐ

- ๐ง **Email:** your@email.com
- ๐ฌ **Telegram:** @your_username
- ๐ **Issues:** [GitHub Issues](https://github.com/myseringan/Esp_Projects/issues)

---

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ัะฐัะฟัะพัััะฐะฝัะตััั ะฟะพะด ะปะธัะตะฝะทะธะตะน MIT. ะะพะดัะพะฑะฝะพััะธ ะฒ ัะฐะนะปะต [LICENSE](LICENSE).

---

<div align="center">

**ะกะดะตะปะฐะฝะพ ั โค๏ธ ะดะปั ัะพะพะฑัะตััะฒะฐ ะณัะพะฒะตัะพะฒ**

โญ ะัะปะธ ะฟัะพะตะบั ะฟะพะปะตะทะตะฝ - ะฟะพััะฐะฒััะต ะทะฒะตะทะดั!

</div>
